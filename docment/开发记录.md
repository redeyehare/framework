[toc]
hJEMM4AeR__qLQGKR5m58HzW
# framework






## 配置文件

- Nginx
- httpserver
  
  - 登录请求
  - 游戏数据
    
    - 房间数据{房间地址,在线玩家,}
  - 自动匹配
  - 手动匹配
  - 最大连接数
  - 打印日志
  - 下载数据
    - 下载引擎文件
    - 下载配置文件
    - 配置文件csv/json/sqlite
  - 服务器关闭
- mysql
  - mysql.md 配置文件
- sqlite
  -  
- client





## 模块功能

### 用户行为
- 登录
- 注册
- 第三方接入
- 修改密码
- 注销
- 忘记密码

##### 用户管理
- 加入()
- 移除()
- 提出
- 黑名单

> 日志
- 订单id  请求时间  操作  结果(成功,失败)

### 大厅

- 房间列表
- 在线玩家列表
- 进入房间
- 发送广播

### 房间

- 房间ID
- 房间类型
- 创建时间
- 销毁房间

> 日志
- id  日期时间 房间 {操作  房间id}

### 用户属性
- uuid
- 用户名
- 密码
- 第三方渠道 & ID



### 广播
- 游戏链接 websocket
- 客户端发送服务器
- 服务器发送客户端
  - 系统
  - 用户

> 日志
- id 日期时间 广播 {角色,内容}

### 消息模块
发送形式 :即时,延时
类型 :(延时)邮件,公告,订阅,聊天(即时),游戏内出发(即时)
目标 :大厅,服务器,房间,组队
发送频率 :一次性,重复
有效期 :

每半小时同步一次消息数据库
每10分钟发送一次消息大厅
每半分钟发送一次房间消息
房间即时消息不同步数据库,奖励消息同步数据库.





## 数据库
设计思路:尽量不是用唯一,用代码在查找时判断.注销的用户在手机号后加后缀,这样可以重复注册.

> user--用户
>- ID uuid
>- register_datatime 注册时间
>- phone 手机号
>- password 密码
>- name 用户名
>- email 邮箱
>- ID_Number 身份证号
>- IP 地址
>- logout 注销
>- blacklist 黑名单
>- waiteList 白名单

> online_user--当前在线用户
>- ID uuid
>- datatime 时间
>- ip 地址
>- token 令牌
>- Offline  离线

> room--当前房间
>- ID uuid
>- datatime 时间
>- ip 地址
>- type 房间类型

> game_user
>- ID
>- game_recording{}

> order--订单日志
>- id 日期时间 来源 {消息体}


### 信息表


### 资源表



### 数据分析表

>每日登录用户数
>
>用户操作行为

##  日志



- 行为日志
  - id 日期时间 类型 消息{}
  - 类型:user,serverMessage,gameMessage 
  {id,操作,}
  - user操作:注册 登录 修改密码 退出 注销 
  - serverMessage: 


- 系统日志
  - id 日期时间 {操作}
  - 启动httpserver 启动gamesever   

- 错误日志
  - 客户端指定id打开
  - 服务器自动开启/关闭
  - 模块功能日志,获取上一步模块

> login
>- id 日期时间 来源 {消息体}

## 控制台操作
- 启动
- 关闭
- 日志等级
- 修改数据库


## 反射数据库工具



## 组件
- 打印日志
- 依赖参数传递




